import{decodeData as c}from"@vuepress/helper/client";import{useEventListener as l,useDebounceFn as d}from"@vueuse/core";import{defineComponent as u,ref as h,shallowRef as m,onMounted as f,onUnmounted as _,h as r}from"vue";import{LoadingIcon as g}from"vuepress-shared/client";import"../styles/echarts.scss";import{u as y}from"../echarts-CVsAPTix.js";const v=(async()=>{}).constructor,C=(t,o,i)=>o==="js"?v("myChart",`let width,height,option,__echarts_config__;
{
${t}
__echarts_config__={width,height,option};
}
return __echarts_config__;
`)(i):Promise.resolve({option:JSON.parse(t)});var w=u({name:"ECharts",props:{config:{type:String,required:!0},id:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"json"}},setup(t){const o=y(),i=h(!0),s=m();let e;return l("resize",d(()=>e?.resize(),100)),f(()=>{Promise.all([import("echarts"),new Promise(n=>setTimeout(n,MARKDOWN_ENHANCE_DELAY))]).then(async([n])=>{await o.setup?.(),e=n.init(s.value);const{option:a,...p}=await C(c(t.config),t.type,e);e.resize(p),e.setOption({...o.option,...a}),i.value=!1})}),_(()=>{e?.dispose()}),()=>[t.title?r("div",{class:"echarts-title"},decodeURIComponent(t.title)):null,r("div",{class:"echarts-wrapper"},[r("div",{ref:s,class:"echarts-container",id:t.id}),i.value?r(g,{class:"echarts-loading",height:360}):null])]}});export{w as default};
//# sourceMappingURL=ECharts.js.map

import{createRequire as M}from"node:module";import{tex as y}from"@mdit/plugin-tex";import I from"upath";const g=M(import.meta.url);let h=!0,p,w,x,s,d,f,v,S;try{({mathjax:p}=await import("mathjax-full/js/mathjax.js")),{AllPackages:w}=await import("mathjax-full/js/input/tex/AllPackages.js"),{TeX:x}=await import("mathjax-full/js/input/tex.js"),{CHTML:s}=await import("mathjax-full/js/output/chtml.js"),{SVG:d}=await import("mathjax-full/js/output/svg.js"),{liteAdaptor:f}=await import("mathjax-full/js/adaptors/liteAdaptor.js"),{RegisterHTMLHandler:v}=await import("mathjax-full/js/handlers/html.js"),{AssistiveMmlHandler:S}=await import("mathjax-full/js/a11y/assistive-mml.js")}catch{h=!1}const j=t=>h?{InputJax:new x({packages:w,...t.tex}),OutputJax:t.output==="chtml"?new s({fontURL:I.dirname(g.resolve("mathjax-full/es5/output/chtml/fonts/woff-v2/MathJax_Zero.woff")),adaptiveCSS:!0,...t.chtml}):new d({fontCache:"none",...t.svg}),enableAssistiveMml:t.a11y!==!1}:(console.error('[@mdit/mathjax] "mathjax-full" is not installed!'),null),H=(t={})=>{const e=j(t);if(!e)return null;const{OutputJax:a,InputJax:i}=e,n=f(),l=v(n);t.a11y!==!1&&S(l);const o=()=>{a instanceof s&&a.clearCache()},r=()=>{i.reset()},c=()=>{const m=n.innerHTML(a.styleSheet(p.document("",e)));return o(),m};return{adaptor:n,documentOptions:e,allowInlineWithSpace:t.allowInlineWithSpace??!1,mathFence:t.mathFence??!1,clearStyle:o,reset:r,outputStyle:c,vPre:t.vPre??!1}},J=(t,e)=>{const{allowInlineWithSpace:a,adaptor:i,documentOptions:n,mathFence:l,vPre:o}=e;t.use(y,{allowInlineWithSpace:a,mathFence:l,render:(r,c)=>{const m=p.document(r,n).convert(r,{display:c}),u=i.outerHTML(m);return o?u.replace(/^<mjx-container/,"<mjx-container v-pre"):u}})};export{H as createMathjaxInstance,j as getDocumentOptions,J as mathjax};
//# sourceMappingURL=index.js.map

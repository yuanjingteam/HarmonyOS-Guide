import{useLocaleConfig as l,isString as i,isArray as n}from"@vuepress/helper/client";import{VidstackPlayerLayout as d,VidstackPlayer as c}from"vidstack/global/player";import{defineComponent as m,ref as y,onMounted as u,onBeforeUnmount as f,h as S}from"vue";import{g as s}from"../getLink-DBmDl_2w.js";import"vidstack/player/styles/default/theme.css";import"vidstack/player/styles/default/layouts/audio.css";import"vidstack/player/styles/default/layouts/video.css";import"../styles/vidstack.scss";import"vuepress/client";var g=m({name:"VidStack",props:{src:{type:[String,Array,Object],required:!0},tracks:{type:Array,default:()=>[]},poster:{type:String,default:""},thumbnails:{type:String,default:""},title:{type:String,default:""},player:{type:Object,default:()=>({})},layout:{type:Object,default:()=>({})},darkmode:Boolean},setup(t){const o=y(),p=l(VIDSTACK_LOCALES);let r=null;return u(async()=>{const e={target:o.value,crossOrigin:!0,poster:t.poster,title:t.title,...t.player,layout:new d({colorScheme:t.darkmode?"dark":"light",thumbnails:t.thumbnails,translations:p.value,...t.layout})};e.src=i(t.src)?s(t.src):n(t.src)?t.src.map(a=>i(a)?s(a):a):t.src,t.tracks.length&&(e.tracks=t.tracks),r=await c.create(e),r.addEventListener("provider-change",()=>{r.provider?.type==="hls"&&HLS_JS_INSTALLED?r.provider.library=()=>import("hls.js/dist/hls.min.js"):r.provider?.type==="dash"&&DASHJS_INSTALLED&&(r.provider.library=()=>import("dashjs"))})}),f(()=>{r?.destroy()}),()=>S("div",{ref:o})}});export{g as default};
//# sourceMappingURL=VidStack.js.map

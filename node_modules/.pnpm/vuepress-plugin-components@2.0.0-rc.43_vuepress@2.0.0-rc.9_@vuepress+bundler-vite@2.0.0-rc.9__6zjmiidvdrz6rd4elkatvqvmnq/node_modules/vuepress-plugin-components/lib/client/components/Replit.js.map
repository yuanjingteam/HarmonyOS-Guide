{"version":3,"file":"Replit.js","sources":["../../../src/client/components/Replit.ts"],"sourcesContent":["/* eslint-disable vue/no-unused-properties */\nimport type { VNode } from \"vue\";\nimport { computed, defineComponent, h, ref } from \"vue\";\nimport { LoadingIcon } from \"vuepress-shared/client\";\n\nimport { useSize } from \"../composables/index.js\";\n\nimport \"../styles/repl-it.scss\";\n\nexport default defineComponent({\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: \"Replit\",\n\n  props: {\n    /**\n     * Replit link\n     *\n     * Replit 链接\n     */\n    link: {\n      type: String,\n      default: \"\",\n    },\n\n    /**\n     * Replit username\n     *\n     * Replit 用户名\n     */\n    user: {\n      type: String,\n      default: \"\",\n    },\n\n    /**\n     * Replit repl name\n     *\n     * Replit repl 名\n     */\n    repl: {\n      type: String,\n      default: \"\",\n    },\n\n    /**\n     * Component width\n     *\n     * 组件宽度\n     */\n    width: {\n      type: [String, Number],\n      default: \"100%\",\n    },\n\n    /**\n     * Component height\n     *\n     * 组件高度\n     */\n    height: {\n      type: [String, Number],\n      default: undefined,\n    },\n\n    /**\n     * Component width / height ratio\n     *\n     * 组件长宽比\n     */\n    ratio: {\n      type: [String, Number],\n      default: 16 / 9,\n    },\n\n    /**\n     * Whether to enable dark mode\n     *\n     * 是否启用暗黑模式\n     */\n    darkmode: Boolean,\n\n    /**\n     * The default file to open in the editor\n     *\n     * 默认打开的文件\n     */\n    file: {\n      type: String,\n      default: () => null,\n    },\n\n    /**\n     * Loading status\n     *\n     * 加载状态\n     */\n    clickToLoad: Boolean,\n\n    /**\n     * Load button text\n     *\n     * 加载按钮文字\n     */\n    text: {\n      type: String,\n      default: \"Load Replit\",\n    },\n  },\n\n  setup(props) {\n    const { el, width, height, resize } = useSize<HTMLDivElement>(props);\n\n    const shouldLoad = ref(false);\n    const loaded = ref(false);\n\n    /**\n     * @see https://docs.replit.com/hosting/embedding-repls#how-to-embed-a-repl\n     */\n    const replLink = computed(() => {\n      if (props.link) {\n        const url = new URL(props.link);\n\n        url.searchParams.set(\"embed\", \"true\");\n        url.searchParams.set(\"theme\", props.darkmode ? \"dark\" : \"light\");\n\n        return url.toString();\n      }\n\n      return props.user && props.repl\n        ? `https://replit.com/@${props.user}/${props.repl}?embed=true&theme=${props.darkmode ? \"dark\" : \"light\"}${\n            props.file?.length ? `#${props.file}` : \"\"\n          }`\n        : null;\n    });\n\n    return (): VNode | null =>\n      replLink.value\n        ? h(\n            \"div\",\n            { class: \"replit-wrapper\" },\n            props.clickToLoad && !shouldLoad.value\n              ? h(\n                  \"button\",\n                  {\n                    type: \"button\",\n                    class: \"replit-button\",\n                    onClick: () => {\n                      shouldLoad.value = true;\n                    },\n                  },\n                  props.text,\n                )\n              : [\n                  h(\"iframe\", {\n                    ref: el,\n                    class: \"replit-iframe\",\n                    src: replLink.value,\n                    style: {\n                      width: width.value,\n                      height: loaded.value ? height.value : 0,\n                    },\n                    onLoad: () => {\n                      loaded.value = true;\n                      resize();\n                    },\n                  }),\n                  loaded.value ? null : h(LoadingIcon),\n                ],\n          )\n        : null;\n  },\n});\n"],"names":["defineComponent","props","el","width","height","resize","useSize","shouldLoad","ref","loaded","replLink","computed","url","h","LoadingIcon"],"mappings":"wPASA,IAAeA,EAAAA,EAAgB,CAE7B,KAAM,SAEN,MAAO,CAML,KAAM,CACJ,KAAM,OACN,QAAS,EACX,EAOA,KAAM,CACJ,KAAM,OACN,QAAS,EACX,EAOA,KAAM,CACJ,KAAM,OACN,QAAS,EACX,EAOA,MAAO,CACL,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,MACX,EAOA,OAAQ,CACN,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,MACX,EAOA,MAAO,CACL,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,GAAK,CAChB,EAOA,SAAU,QAOV,KAAM,CACJ,KAAM,OACN,QAAS,IAAM,IACjB,EAOA,YAAa,QAOb,KAAM,CACJ,KAAM,OACN,QAAS,aACX,CACF,EAEA,MAAMC,EAAO,CACX,KAAM,CAAE,GAAAC,EAAI,MAAAC,EAAO,OAAAC,EAAQ,OAAAC,CAAO,EAAIC,EAAwBL,CAAK,EAE7DM,EAAaC,EAAI,EAAK,EACtBC,EAASD,EAAI,EAAK,EAKlBE,EAAWC,EAAS,IAAM,CAC9B,GAAIV,EAAM,KAAM,CACd,MAAMW,EAAM,IAAI,IAAIX,EAAM,IAAI,EAE9B,OAAAW,EAAI,aAAa,IAAI,QAAS,MAAM,EACpCA,EAAI,aAAa,IAAI,QAASX,EAAM,SAAW,OAAS,OAAO,EAExDW,EAAI,SAAA,CACb,CAEA,OAAOX,EAAM,MAAQA,EAAM,KACvB,uBAAuBA,EAAM,IAAI,IAAIA,EAAM,IAAI,qBAAqBA,EAAM,SAAW,OAAS,OAAO,GACnGA,EAAM,MAAM,OAAS,IAAIA,EAAM,IAAI,GAAK,EAC1C,GACA,IACN,CAAC,EAED,MAAO,IACLS,EAAS,MACLG,EACE,MACA,CAAE,MAAO,gBAAiB,EAC1BZ,EAAM,aAAe,CAACM,EAAW,MAC7BM,EACE,SACA,CACE,KAAM,SACN,MAAO,gBACP,QAAS,IAAM,CACbN,EAAW,MAAQ,EACrB,CACF,EACAN,EAAM,IACR,EACA,CACEY,EAAE,SAAU,CACV,IAAKX,EACL,MAAO,gBACP,IAAKQ,EAAS,MACd,MAAO,CACL,MAAOP,EAAM,MACb,OAAQM,EAAO,MAAQL,EAAO,MAAQ,CACxC,EACA,OAAQ,IAAM,CACZK,EAAO,MAAQ,GACfJ,EACF,CAAA,CACF,CAAC,EACDI,EAAO,MAAQ,KAAOI,EAAEC,CAAW,CACrC,CACN,EACA,IACR,CACF,CAAC"}
import{isString as i,isArray as s}from"@vuepress/helper/client";import{PlyrLayout as l,VidstackPlayer as n}from"vidstack/global/player";import{defineComponent as y,shallowRef as d,onMounted as c,onBeforeUnmount as m,h as u}from"vue";import"vidstack/player/styles/base.css";import"vidstack/player/styles/plyr/theme.css";import"../styles/video-player.scss";import{g as p}from"../getLink-DBmDl_2w.js";import"vuepress/client";var f=y({name:"VideoPlayer",props:{src:{type:[String,Array,Object],required:!0},tracks:{type:Array,default:()=>[]},poster:{type:String,default:""},thumbnails:{type:String,default:""},title:{type:String,default:""},player:{type:Object,default:()=>({})},layout:{type:Object,default:()=>({})}},setup(r){const a=d();let t=null;return c(async()=>{const e={target:a.value,crossOrigin:!0,poster:r.poster,title:r.title,...r.player,layout:new l({thumbnails:r.thumbnails,...r.layout})};e.src=i(r.src)?p(r.src):s(r.src)?r.src.map(o=>i(o)?p(o):o):r.src,r.tracks.length&&(e.tracks=r.tracks),t=await n.create(e),t.addEventListener("provider-change",()=>{t.provider?.type==="hls"&&HLS_JS_INSTALLED?t.provider.library=()=>import("hls.js/dist/hls.min.js"):t.provider?.type==="dash"&&DASHJS_INSTALLED&&(t.provider.library=()=>import("dashjs"))})}),m(()=>{t?.destroy()}),()=>u("div",{ref:a})}});export{f as default};
//# sourceMappingURL=VideoPlayer.js.map
